<div class="table-container mat-elevation-z8">
   <mat-form-field>
      <mat-label>Filter</mat-label>
      <input matInput (keyup)="applyFilter($event)" placeholder="">
   </mat-form-field>

   <table #table mat-table multiTemplateDataRows [dataSource]="dataSource" cdkDropList cdkDropListOrientation="horizontal"
      (cdkDropListDropped)="drop($event)" matSort>

      <ng-container [matColumnDef]="column.key" *ngFor="let column of ( displayedColumns | tableheaderconverter )">
         <th class="w-15 th-left" mat-header-cell *matHeaderCellDef mat-sort-header cdkDrag> {{column.display}} </th>
         <td class="w-15 th-left" mat-cell *matCellDef="let element"> 
            {{element[column.key]}}
         </td>
      </ng-container>

      <!-- Detail information when user clicked the rows -->
      <!-- 
         This is the expanded section of the rows. When the user clicked the row,
         expandedElement declared in the ts file will be assigned to the 
         element which was distributed from the datasource at the beginning
         of the program.
         Then, in this container, only the assigned element will be assigned
         expanded to the detailExpand.
      -->
      <ng-container matColumnDef="expandedDetail">
         <td mat-cell *matCellDef="let element" [attr.colspan]="displayedColumns.length">
            <div class="element-detail" [@detailExpand]="element == expandedElement ? 'expanded' : 'collapsed'">
               <div>
                  <h3><strong>Comment</strong></h3>
               </div>
               <br>
               <div class="element-comment">
                  {{element.comment}}
               </div>
            </div>
         </td>
      </ng-container>

      <tr mat-header-row *matHeaderRowDef="displayedColumns; sticky: true"></tr>
      <tr mat-row *matRowDef="let element; columns: displayedColumns;"
          class="element-row"
          [class.element-detail-row]="expandedElement === element"
          (click)="expandedElement = expandedElement === element ? null : element">
      <tr mat-row *matRowDef="let row; columns: ['expandedDetail'];" class="element-detail-row" ></tr>

   </table>
   <mat-paginator [pageSizeOptions]="[5, 10, 25, 100]"></mat-paginator>
</div>